<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>안전행정섹션 안전보건관리체계</title>
  <link rel="canonical" href="https://poswel-safety.co.kr/" />
  <meta name="description" content="POSWEL Safety | 안전행정섹션 안전보건관리체계 포털" />
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN" />
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
  <!-- 캐시를 최대한 막아 새로 열릴 때 로그인부터 보이도록 -->
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Malgun Gothic', sans-serif; min-height: 100vh; background-color: #f4f6f7; }

    /* 로그인 화면 */
    #login-container { display: flex; justify-content: center; align-items: center; height: 100vh; }
    #login-box { background: #ffffff; padding: 40px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.1); width: 320px; }
    #login-box h2 { text-align: center; margin-bottom: 20px; color: #2c3e50; }
    #login-box input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; }
    #login-box button { width: 100%; padding: 10px; background-color: #2c3e50; color: #fff; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
    #login-error { color: red; font-size: 14px; text-align: center; display: none; }

    /* 본문 화면: 처음엔 숨김 */
    #main-container { display: none; min-height: 100vh; }

    /* 레이아웃 */
    .layout { display: flex; }
    .sidebar { width: 250px; background-color: #2c3e50; color: #ecf0f1; padding: 20px; transition: width 0.3s ease; overflow: hidden; position: relative; }
    .sidebar.collapsed { width: 60px; }
    .sidebar h2 { margin-bottom: 20px; font-size: 20px; border-bottom: 1px solid #7f8c8d; padding-bottom: 10px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .sidebar ul { list-style: none; }
    .sidebar ul li { margin: 15px 0; cursor: pointer; transition: background 0.3s; padding: 10px; border-radius: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .sidebar ul li:hover { background-color: #34495e; }
    .toggle-btn { background: none; border: none; color: #ecf0f1; font-size: 18px; cursor: pointer; position: absolute; top: 20px; right: -15px; background-color: #34495e; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; }
    .main { flex: 1; padding: 40px; background-color: #f4f6f7; }
    .main h1 { font-size: 28px; color: #2c3e50; margin-bottom: 30px; display: flex; align-items: center; justify-content: space-between; }
    .logout-btn { padding: 8px 14px; border: 1px solid #2c3e50; background: #fff; color: #2c3e50; border-radius: 8px; cursor: pointer; }

    /* 보조: 숨김/표시 클래스 */
    .hidden { display: none !important; }
    .flex { display: flex !important; }
  </style>
</head>
<body>
  <!-- 로그인 화면 -->
  <div id="login-container">
    <div id="login-box">
      <h2>로그인</h2>
      <input type="text" id="username" placeholder="아이디" autocomplete="off" />
      <input type="password" id="password" placeholder="비밀번호" autocomplete="off" />
      <div id="login-error">아이디 또는 비밀번호가 올바르지 않습니다.</div>
      <button id="login-btn" aria-label="로그인">로그인</button>
    </div>
  </div>

  <!-- 본문 화면 (처음엔 display:none) -->
  <div id="main-container" class="hidden">
    <div class="layout">
      <div class="sidebar" id="sidebar">
        <button class="toggle-btn" id="toggleBtn" aria-label="메뉴 접기/펼치기">⮜</button>
        <h2>메뉴</h2>
        <ul>
          <li>1. 안전보건경영방침 및 목표</li>
          <li>2. TBM</li>
          <li>3. 위험성평가</li>
          <li>4. 안전보건교육</li>
          <li>5. MSDS</li>
        </ul>
      </div>

      <div class="main">
        <h1>
          안전행정섹션 안전보건관리체계
          <button id="logout-btn" class="logout-btn" aria-label="로그아웃">로그아웃</button>
        </h1>
        <p>여기에 본문 내용을 추가하세요.</p>
      </div>
    </div>
  </div>

  <script>
    // 항상 로그인부터 보이게: 초기화 (캐시되었어도 강제 초기 상태)
    (function resetView() {
      const loginContainer = document.getElementById('login-container');
      const mainContainer  = document.getElementById('main-container');
      if (loginContainer && mainContainer) {
        loginContainer.classList.remove('hidden');
        loginContainer.style.display = 'flex';
        mainContainer.classList.add('hidden');
        mainContainer.classList.remove('flex');
      }
      // 혹시 이전 코드로 저장된 값이 있다면 제거
      try { localStorage.removeItem('ps_logged_in'); sessionStorage.clear(); } catch (e) {}
    })();

    // 브라우저 뒤로가기 시 BFCache로 메인화면이 남지 않게 재로딩
    window.addEventListener('pageshow', function (e) {
      if (e.persisted) location.reload();
    });

    // 사이드바 토글
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('toggleBtn');
    if (toggleBtn) {
      toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
        toggleBtn.textContent = sidebar.classList.contains('collapsed') ? '⮞' : '⮜';
      });
    }

    // 로그인 로직 (저장소 사용 없음: 새 창/새로고침마다 다시 로그인)
    const loginContainer = document.getElementById('login-container');
    const mainContainer  = document.getElementById('main-container');
    const loginBtn = document.getElementById('login-btn');
    const usernameEl = document.getElementById('username');
    const passwordEl = document.getElementById('password');
    const errorMsg   = document.getElementById('login-error');

    function showMain() {
      loginContainer.classList.add('hidden');
      mainContainer.classList.remove('hidden');
      mainContainer.classList.add('flex');
    }

    function doLogin() {
      const username = (usernameEl.value || '').trim();
      const password = passwordEl.value || '';
      if (username === 'poswel' && password === 'poswel0!') {
        showMain();
      } else {
        errorMsg.style.display = 'block';
      }
    }

    if (loginBtn) loginBtn.addEventListener('click', doLogin);
    [usernameEl, passwordEl].forEach(el => el.addEventListener('keydown', (e) => { if (e.key === 'Enter') doLogin(); }));

    // 로그아웃: 즉시 로그인 화면 복귀 + 캐시/스토리지 정리
    const logoutBtn = document.getElementById('logout-btn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', () => {
        try { localStorage.removeItem('ps_logged_in'); sessionStorage.clear(); } catch (e) {}
        // 안전하게 전체를 초기 렌더로 리로드
        location.replace(location.origin + location.pathname);
      });
    }
  </script>
</body>
</html>
